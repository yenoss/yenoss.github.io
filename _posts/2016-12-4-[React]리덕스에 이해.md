---
layout: post
title: 2016-12-4-[React]Redux의 이해.
---


#리덕스를 이해해보자.
=======
먼저 리덕스는 플럭스패턴에 기초한다. 
dispatch를 이용해 액션을 받아 해당 액션들에 대해 store에서 전체적으로 저장하여 관리하게된다.
즉 어디에서든 dispatch만을 통해 action을 먹여 store 즉 state값을 유효하고 수월하게 변경할 수 있게된다.
<br></br>

####0.리덕스는 중요한 특징이 몇 있다.

http://dobbit.github.io/redux/introduction/ThreePrinciples.html

리덕스의 기본 도큐먼트이다.(이글도 위의 문서를 기반으로 작성되었다.)
여기서 리덕스를 이해하기위한 기본적인 특징이 있다.

* 모든 상태는 하나의 스토어에서 관리된다. 
* 상태는 읽기전용이다. 액션을 통해서만 추가 및 정정될 수 있다.
* 액션에의해 상태트리(기능 및 UI적 저장소 모양을 일컫음)가 어떻게 변화하는지를 단순하고 순수하게 작성해야한다. (복잡해서도 안되고 정말 기능만 하는 함수로만 이루어져야한다.)

위와같은 컨셉을 이해하여야 리듀스를 조금 더 쉽게 사용할 수 있을 것이다.
pedaler의 순차적 리듀스 적용과정을 살펴보자.
<br></br>


####1.store
스토어는 기본적으로 하나의 저장소이다. state를 가지는 기본 저장소가 되고, 모든 데이터가 관리된다.
스토어는 간단하게

~~~
createStore(reducer)
~~~

위와같이 기본적으로 리듀서 기반으로 생성되지만 store가 된다는 점 즉 status관리 측면에서 몇 가지 미들웨어(넣으면좋은 라이브러리)를 추가해준다.


필자의 프로젝트에선 status변경사항을 쉽게보여주는 redux-logger 와 
후에 비동기 처리를 위해 dispatch 파라미터에 function을 넣어줄수 있는 redux-thunk 이다.

~~~
const createStoreWithMiddleware = applyMiddleware(
  thunkMiddleware,
  loggerMiddleware
)(createStore);
~~~
이와같은 방식으로 미들웨어를 포함한 store를 만든다.
 <br></br>

####2.reducer
리듀서는 어떠한 변경(action)에대해 state를 어떻게 처리할 것인가 에대한 조건을 가지고있다. 


예를 들면


로그인하는 과정에서 서버의 요청을 하고 그에따른 결과를 status에 저장해서 관리한다고 하자.


reducer에는 로그인 요청결과를 처리하는 함수가있고, 해당함수에서 현재 status(store상태)그리고 로그인요청에따른 결과를 받아서 status에 추가를 할지 삭제를 할지를 정해준다.

<br></br>

####3.action
액션은 말그대로 어떠한 행동을 할것인지 정해주는 부분이다.

뷰어디서든 발생할수있으며 여기서 일어난행동을 통해 reducer로 넘어가게된다.(그래서 위에 리듀서에서 액션을 받게된다.)


위의 예로 계속들면

액션에 login요청 함수가 있고, 이 함수는 

~~~
=> 최초 로그인요청시
=> status에 요청중이라는 상태를 저장하게 '지시(action)'을 내린다.(로그인중, indicator를 돌리는등 ui적인 액션을 취하기위해) 
=> 이후 fetch를 통해 서버에 요청을하고 다시 서버에서 나온 결과를 status에 저장하라고 '지시'를 내린다. 
~~~

위의 설명과 같이 단지 '지시' 와 서버요청결과만을 dispatch를 통해 store에 보내게된다. 

실제 지시에따른 행위를 하는곳은 reducer인게 된다.


##정리
#### 사실 위의 컨셉은 기본적인 내용이고 구현하려하면 크게 어려움은 없을것이다. 하지만 실질적으론 어떠한 정보를 status에 저장할지, 그리고 status tree는 어떻게 설계하여 관리할지. 등에 대한 세부적인 설계가 훨씬 복잡해보인다. 







